@* Copyright 2014-2016, hbz. Licensed under the Eclipse Public License 1.0 *@

@(q: String, json: String, from: Int, size: Int)

@import play.api.libs.json._

@main(q) {
	@defining((Json.parse(json)\"hits"\"hits").as[Seq[JsValue]]) { items =>
		@if(items.size > 1) {
			<p>
			@defining((Json.parse(json) \ "hits" \ "total").as[Int]) { totalResults =>
				Treffer: @(totalResults) |
				@if(from > 0){<a href='@routes.HomeController.search(q=q, from=from-size)'>&LeftArrow; Vorige</a>}
				@(from+1)&mdash;@(Math.min(totalResults, from+size))
				@if(totalResults > from+size){<a href='@routes.HomeController.search(q=q, from=from+size)'>NÃ¤chste &RightArrow;</a>}
			}
			</p>
			<dl>
			@for(item <- items) {
				<dt>@((item \ "_source" \ "title").asOpt[String].getOrElse("--"))</dt>
				@defining((item \ "_source" \ "id").asOpt[String].getOrElse("--")) { id =>
				<dd><a href='@id.replace("digitalisiertedrucke.de", request().host())'>@id</a></dd>
				}
			}
			</dl>
		} else {
			<p>Keine Treffer.</p>
		}
	}
}